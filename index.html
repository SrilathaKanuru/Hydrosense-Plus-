<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#0288d1" />
  <title>HydroSense Pro</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    /* Embedded style for demo purposes */
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      background: #e0f7fa;
      color: #004d40;
      overflow-x: hidden;
    }
    header {
      background: linear-gradient(to right, #0288d1, #26c6da);
      color: white;
      padding: 20px;
      text-align: center;
      animation: slideInDown 1s;
    }
    nav {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-around;
      background: #b3e5fc;
      padding: 10px;
    }
    nav button {
      background: #0288d1;
      color: white;
      border: none;
      padding: 10px;
      border-radius: 8px;
      margin: 5px;
      font-weight: bold;
      cursor: pointer;
      transition: 0.3s;
    }
    nav button:hover {
      background: #01579b;
    }
    .screen {
      display: none;
      padding: 15px;
    }
    .screen.active {
      display: block;
    }
    .card {
      background: white;
      margin: 15px 0;
      padding: 15px;
      border-radius: 12px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      transition: transform 0.3s;
      animation: fadeIn 1s;
    }
    .card:hover {
      transform: scale(1.02);
    }
    .card.expanded {
      background: #f0f8ff;
    }
    footer {
      text-align: center;
      padding: 10px;
      font-size: 13px;
      color: #555;
      background: #eee;
    }
    .pulse {
      animation: pulse 1s infinite;
    }
    @keyframes pulse {
      0% { background-color: #ffebee; }
      50% { background-color: #ffcdd2; }
      100% { background-color: #ffebee; }
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    @keyframes slideInDown {
      from { transform: translateY(-100%); }
      to { transform: translateY(0); }
    }
    body.drops::before {
      content: '';
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: url('https://i.ibb.co/tJkQ9f0/water-drop.png') repeat;
      opacity: 0.02;
      z-index: -1;
    }
  </style>
</head>
<body class="drops">

  <header>
    <h1>üíß HydroSense Pro</h1>
    <p>Smart Water Monitoring</p>
  </header>

  <nav>
    <button onclick="navigate('home')">üè† Home</button>
    <button onclick="navigate('graph')">üìä Graph</button>
    <button onclick="navigate('about')">‚ÑπÔ∏è About</button>
    <button onclick="toggleDarkMode()">üåë Mode</button>
  </nav>

  <main>
    <!-- Home -->
    <section id="home" class="screen active">
      <div class="card"><h2>Total Usage</h2><p><strong id="usage">128 Liters</strong></p></div>
      <div class="card"><h2>Tank Level</h2><p id="tankLevel">Full</p></div>
      <div class="card"><h2>Temperature</h2><p id="tempSensor"></p></div>
      <div class="card"><h2>Battery Level</h2><p id="batteryLevel"></p></div>
      <div class="card"><h2>üí° Water Tip</h2><p id="tipText"></p></div>
      <div class="card"><h2>Progress</h2><div style="background:#ddd; border-radius:10px;"><div id="progressBar" style="width:60%; background:#0288d1; color:white; padding:5px; border-radius:10px;">60%</div></div></div>
    </section>

    <!-- Graph -->
    <section id="graph" class="screen">
      <div class="card">
        <h2>Water Usage</h2>
        <select onchange="toggleGraphData(this.value)">
          <option value="daily">Daily</option>
          <option value="weekly">Weekly</option>
        </select>
        <canvas id="graphCanvas"></canvas>
      </div>
    </section>

    <!-- About -->
    <section id="about" class="screen">
      <div class="card">
        <h2>About HydroSense Pro</h2>
        <p>This app demonstrates a smart water monitoring dashboard with charts, tips, animations, and dark mode.</p>
      </div>
    </section>
  </main>

  <footer>
    <p>¬© 2025 HydroSense Pro</p>
  </footer>

  <script>
    function navigate(id) {
      document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }

    function toggleDarkMode() {
      document.body.classList.toggle('dark');
    }

    // Chart.js setup
    let usageChart;
    let chartLabels = {
      daily: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
      weekly: ['Week 1', 'Week 2', 'Week 3', 'Week 4']
    };
    let chartData = {
      daily: [45, 50, 60, 55, 70, 65, 68],
      weekly: [320, 280, 310, 345]
    };
    function renderChart(type = 'daily') {
      if (usageChart) usageChart.destroy();
      usageChart = new Chart(document.getElementById("graphCanvas"), {
        type: 'bar',
        data: {
          labels: chartLabels[type],
          datasets: [{
            label: "Liters Used",
            data: chartData[type],
            backgroundColor: '#0288d1',
            borderColor: '#01579b',
            borderWidth: 1
          }]
        },
        options: {
          responsive: true,
          animation: { duration: 1200 },
          scales: { y: { beginAtZero: true } }
        }
      });
    }
    renderChart();
    function toggleGraphData(type) { renderChart(type); }

    // Simulated sensor values
    const temp = 24 + Math.floor(Math.random() * 6);
    document.getElementById("tempSensor").innerText = temp + " ¬∞C";
    document.getElementById("batteryLevel").innerText = (60 + Math.floor(Math.random() * 30)) + "%";

    // Water usage tip rotation
    const tips = [
      "Turn off tap while brushing.",
      "Fix leaks immediately.",
      "Use buckets instead of hoses.",
      "Water plants early in the morning.",
      "Check tanks weekly."
    ];
    function rotateTip() {
      const tipEl = document.getElementById("tipText");
      let index = 0;
      const lastTip = localStorage.getItem("lastTip");
      if (lastTip) tipEl.innerText = lastTip;
      setInterval(() => {
        tipEl.innerText = tips[index % tips.length];
        localStorage.setItem("lastTip", tips[index % tips.length]);
        index++;
      }, 5000);
    }
    rotateTip();

    // Simulate tank level
    const tank = document.getElementById('tankLevel');
    const levels = ['Low', 'Medium', 'Full'];
    tank.innerText = levels[Math.floor(Math.random() * levels.length)];

    // Usage alert
    const usage = 128;
    const limit = 120;
    const usageEle = document.getElementById("usage");
    if (usage > limit) {
      usageEle.classList.add("pulse");
    }

    // Progress bar
    const usagePercent = Math.min(100, Math.floor((usage / 200) * 100));
    document.getElementById("progressBar").style.width = usagePercent + "%";
    document.getElementById("progressBar").innerText = usagePercent + "%";

    // Expandable cards
    document.querySelectorAll(".card").forEach(card => {
      card.addEventListener("click", () => {
        card.classList.toggle("expanded");
      });
    });

    // Auto dark mode by time
    const hour = new Date().getHours();
    if (hour >= 19 || hour <= 6) document.body.classList.add("dark");
  </script>
</body>
</html>
